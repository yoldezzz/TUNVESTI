2025-12-22 23:08:46,514 - INFO - ======================================================================
2025-12-22 23:08:46,515 - INFO - Loading stock data...
2025-12-22 23:08:46,515 - INFO - ======================================================================
2025-12-22 23:08:46,733 - INFO - ✓ Loaded 185892 stock records
2025-12-22 23:08:46,739 - INFO -   Tickers: 88
2025-12-22 23:08:46,743 - INFO -   Date range: 2010-01-04 00:00:00 to 2022-12-30 00:00:00
2025-12-22 23:08:46,743 - INFO - Loading TUNINDEX data...
2025-12-22 23:08:46,763 - INFO - ✓ Loaded 1 TUNINDEX records
2025-12-22 23:08:46,763 - INFO -   Date range: 2025-12-22 00:00:00 to 2025-12-22 00:00:00
2025-12-22 23:08:46,769 - INFO - Loading sector mapping...
2025-12-22 23:08:46,807 - INFO - ✓ Loaded sector mapping for 90 stocks
2025-12-22 23:08:46,808 - INFO - 
======================================================================
2025-12-22 23:08:46,808 - INFO - Calculating Stock-to-Stock Correlations
2025-12-22 23:08:46,808 - INFO - ======================================================================
2025-12-22 23:08:46,919 - INFO - Prepared pivot table: 3235 dates × 87 tickers
2025-12-22 23:08:46,923 - INFO - Using 0 trading days for correlation (60-day window)
2025-12-22 23:08:46,923 - INFO - ✓ Correlation matrix calculated: (87, 87)
2025-12-22 23:08:46,923 - INFO - 
----------------------------------------------------------------------
2025-12-22 23:08:46,923 - INFO - TOP CORRELATED PAIRS (Useful for Diversification)
2025-12-22 23:08:46,924 - INFO - ----------------------------------------------------------------------
2025-12-22 23:08:46,977 - INFO - 
Highly Correlated Pairs (AVOID combining - less diversification):
2025-12-22 23:08:46,977 - INFO -   AB     ↔ ADWYA  =     nan
2025-12-22 23:08:46,977 - INFO -   AB     ↔ AETEC  =     nan
2025-12-22 23:08:46,977 - INFO -   AB     ↔ AL     =     nan
2025-12-22 23:08:46,977 - INFO -   AB     ↔ ALKIM  =     nan
2025-12-22 23:08:46,978 - INFO -   AB     ↔ AMI    =     nan
2025-12-22 23:08:46,978 - INFO -   AB     ↔ AMS    =     nan
2025-12-22 23:08:46,978 - INFO -   AB     ↔ ARTES  =     nan
2025-12-22 23:08:46,978 - INFO -   AB     ↔ ASSAD  =     nan
2025-12-22 23:08:46,978 - INFO -   AB     ↔ ASSMA  =     nan
2025-12-22 23:08:46,978 - INFO -   AB     ↔ AST    =     nan
2025-12-22 23:08:46,978 - INFO - 
Negatively Correlated Pairs (GOOD for diversification):
2025-12-22 23:08:46,978 - INFO -   UBCI   ↔ UIB    =     nan
2025-12-22 23:08:46,978 - INFO -   UBCI   ↔ UMED   =     nan
2025-12-22 23:08:46,978 - INFO -   UBCI   ↔ WIFAK  =     nan
2025-12-22 23:08:46,978 - INFO -   UBCI   ↔ XABYT  =     nan
2025-12-22 23:08:46,979 - INFO -   UIB    ↔ UMED   =     nan
2025-12-22 23:08:46,979 - INFO -   UIB    ↔ WIFAK  =     nan
2025-12-22 23:08:46,979 - INFO -   UIB    ↔ XABYT  =     nan
2025-12-22 23:08:46,979 - INFO -   UMED   ↔ WIFAK  =     nan
2025-12-22 23:08:46,979 - INFO -   UMED   ↔ XABYT  =     nan
2025-12-22 23:08:46,979 - INFO -   WIFAK  ↔ XABYT  =     nan
2025-12-22 23:08:46,979 - INFO - 
======================================================================
2025-12-22 23:08:46,979 - INFO - Calculating Stock-to-TUNINDEX Correlations
2025-12-22 23:08:46,979 - INFO - ======================================================================
2025-12-22 23:08:46,995 - ERROR - Error calculating stock-to-TUNINDEX correlation: 'Correlation_to_TUNINDEX'
Traceback (most recent call last):
  File "C:\Users\NOUIRA\Documents\junior\BI project\scripts\07_calculate_correlations.py", line 253, in calculate_stock_to_tunindex_correlation
    df_tunindex_corr = df_tunindex_corr.sort_values('Correlation_to_TUNINDEX', ascending=False)
  File "C:\Users\NOUIRA\Documents\junior\BI project\.venv\Lib\site-packages\pandas\core\frame.py", line 7211, in sort_values
    k = self._get_label_or_level_values(by[0], axis=axis)
  File "C:\Users\NOUIRA\Documents\junior\BI project\.venv\Lib\site-packages\pandas\core\generic.py", line 1914, in _get_label_or_level_values
    raise KeyError(key)
KeyError: 'Correlation_to_TUNINDEX'
2025-12-22 23:08:47,291 - INFO - 
======================================================================
2025-12-22 23:08:47,291 - INFO - Calculating Sector-to-TUNINDEX Correlations
2025-12-22 23:08:47,291 - INFO - ======================================================================
2025-12-22 23:08:47,352 - ERROR - Error calculating sector correlations: 'Correlation_to_TUNINDEX'
Traceback (most recent call last):
  File "C:\Users\NOUIRA\Documents\junior\BI project\scripts\07_calculate_correlations.py", line 310, in calculate_sector_correlations
    df_sector_corr = df_sector_corr.sort_values('Correlation_to_TUNINDEX', ascending=False)
  File "C:\Users\NOUIRA\Documents\junior\BI project\.venv\Lib\site-packages\pandas\core\frame.py", line 7211, in sort_values
    k = self._get_label_or_level_values(by[0], axis=axis)
  File "C:\Users\NOUIRA\Documents\junior\BI project\.venv\Lib\site-packages\pandas\core\generic.py", line 1914, in _get_label_or_level_values
    raise KeyError(key)
KeyError: 'Correlation_to_TUNINDEX'
2025-12-22 23:08:47,353 - INFO - 
======================================================================
2025-12-22 23:08:47,353 - INFO - EXPORTING CORRELATION MATRICES
2025-12-22 23:08:47,353 - INFO - ======================================================================
2025-12-22 23:08:47,360 - INFO - ✓ Stock-to-stock correlation matrix: C:\Users\NOUIRA\Documents\junior\BI project\data\correlation_stock_to_stock.csv
2025-12-22 23:08:47,365 - INFO - ✓ Correlation pairs analysis: C:\Users\NOUIRA\Documents\junior\BI project\data\correlation_pairs.csv
2025-12-22 23:08:47,365 - INFO - 
======================================================================
2025-12-22 23:08:47,365 - INFO - ✅ CORRELATION ANALYSIS COMPLETE
2025-12-22 23:08:47,365 - INFO - ======================================================================
2025-12-22 23:08:47,365 - INFO - 
Key Insights:
2025-12-22 23:08:47,365 - INFO - • Use stock-to-stock correlations to identify diversification opportunities
2025-12-22 23:08:47,365 - INFO - • Combine stocks with LOW correlation for better risk management
2025-12-22 23:08:47,365 - INFO - • Stocks with LOW TUNINDEX correlation are good diversifiers
2025-12-22 23:08:47,366 - INFO - • Sectors with HIGH TUNINDEX correlation move with overall market
2025-12-22 23:08:47,366 - INFO - • Sectors with LOW TUNINDEX correlation offer hedge opportunities
2025-12-22 23:08:47,366 - INFO - 
✅ Script completed successfully!
